runtime: container
build:
  dockerfile: Dockerfile
  dockerBuildPath: .
startCommand:
  type: http
  env:
    TRANSPORT: http

env:
  - name: BROWSERBASE_API_KEY
    description: 'Browserbase API key. Required to create managed sessions.'
    required: true
  - name: BROWSERBASE_CONTEXT_ID
    description: 'Optional Browserbase context ID to reuse saved browser state.'
    required: false
  - name: BROWSERBASE_PERSIST
    description: 'Persist context state after the session ends (true/false).'
    required: false
    default: 'true'

configSchema:
  type: object
  additionalProperties: false
  properties:
    browserUrl:
      type: string
      format: uri
      description: 'Existing Chrome WebSocket debugging URL to connect to.'
    headless:
      type: boolean
      description: 'Run Chrome in headless mode.'
      default: false
    executablePath:
      type: string
      description: 'Absolute path to a Chrome executable inside the container.'
    isolated:
      type: boolean
      description: 'Launch Chrome with an isolated user data dir.'
      default: false
    customDevtools:
      type: string
      description: 'Path to a custom DevTools frontend bundle.'
    channel:
      type: string
      enum: ['stable', 'beta', 'canary', 'dev']
      description: 'Chrome channel to use when launching the bundled browser.'
    logFile:
      type: string
      description: 'Optional path inside the container where debug logs should be written.'
    viewport:
      type: string
      description: 'Viewport size for launched Chrome instances, for example 1280x720.'
    proxyServer:
      type: string
      description: 'Proxy server definition to forward Chrome network traffic through.'
    acceptInsecureCerts:
      type: boolean
      description: 'Ignore TLS certificate errors when launching Chrome.'
    experimentalDevtools:
      type: boolean
      description: 'Enable DevTools automation targets (experimental).'
    browserbase:
      type: object
      description: 'Launch a managed Browserbase session and connect Chrome DevTools MCP to it automatically.'
      additionalProperties: false
      properties:
        apiKey:
          type: string
          description: 'Browserbase API key. Required to create managed sessions.'
        projectId:
          type: string
          description: 'Browserbase project ID. Defaults to bc914a3df39095025464368c5cabf0af8ae97b1f.'
        contextId:
          type: string
          description: 'Optional Browserbase context ID to reuse saved browser state.'
        persist:
          type: boolean
          description: 'Persist context state after the session ends. Defaults to true.'
      required: ['apiKey']
    chromeArg:
      type: array
      description: 'Additional command-line switches to pass to Chrome.'
      items:
        type: string
exampleConfig:
  channel: stable
  headless: false
  isolated: false
  viewport: '1280x720'
  browserbase:
    apiKey: '${BROWSERBASE_API_KEY}'
    contextId: '${BROWSERBASE_CONTEXT_ID}'
    persist: '${BROWSERBASE_PERSIST}'
